import { Meta, Story } from '@storybook/addon-docs';

<Meta title="Form/Change values" />

# Изменение значений в форме

Есть 2 метода для изменения значений в форме:

### clearForm

Поставляется через `defineExpose` из `CdekForm`. Позволяет одной функцией почистить все текущие значения в форме, присваивает им пустую строку.

<Story id="form-cdekform--clear-form" />

```js dark
const cdekFormRef = ref(null);

const clearForm = () => {
  cdekFormRef.value?.clearForm();
};
```

```html dark
<CdekForm ref="cdekFormRef"> ... </CdekForm>
```

### changeValue

Поставляется через `defineExpose` из `CdekFormControl`. Позволяет изменить значение одного из полей формы.

<Story id="form-cdekformcontrol--change-value-parent" />

```js dark
const nameInput = ref(null);

const changeValue = () => {
  nameInput.value?.changeValue('this value is from parent');
};
```

```html dark
<CdekFormControl ref="nameInput" />
```

### Событие change на CdekForm

Позволяет отслеживать изменения формы.

<Story id="form-cdekform--change-event" />

```js dark
import type { FormChangeResult } from '@cdek-ui-kit/vue';

const change = (result: FormChangeResult<CustomValuesT>) => {
  /**
   * В result будет лежать объект такого вида:
   * type FormChangeResult<CustomValuesT = FieldsT> = {
   *  isValid: boolean;
   *  errors: ErrorsT;
   *  values: CustomValuesT;
   * };
   */
  console.log(result);
}
```

```html dark
<CdekForm @change="change">
  <CdekFormControl name="firstName" label="firstName" />
  <CdekFormControl name="surname" label="surname" />
</CdekForm>
```

### Событие change на CdekFormControl

Позволяет отслеживать изменения поля.

<Story id="form-cdekformcontrol--primary" />

```js dark
import type { FieldChangeResult } from '@cdek-ui-kit/vue';

const change = (result: FieldChangeResult<CustomValueT>) => {
  /**
   * В result будет лежать объект такого вида:
   * type FieldChangeResult<CustomValueT = string> = {
   *  isValid: boolean;
   *  error?: true | string;
   *  value: ValueT;
   * };
   */
  console.log(result);
}
```

```html dark
<CdekForm>
  <CdekFormControl name="firstName" @change="change">
</CdekForm>
```

