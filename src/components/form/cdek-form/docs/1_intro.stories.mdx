import { Meta, Story } from '@storybook/addon-docs';

<Meta
  title="Form/CdekForm/Intro"
  parameters={{
    version: {
      major: '0',
      minor: '0',
      patch: '1',
      postfix: 'alpha',
      style: {
        background: 'rgba(228, 0, 41, 0.05)',
        color: '#e40029',
      },
    },
  }}
/>

# Форма

Базовая идея формы состоит в том, чтобы сделать описание формы только засчет параметров
этой самой формы. Она должна работать полностью автономно, выдавая на выходе объект, который
можно сразу отправлять на бэк.

### Базовая структура

Для работоспособности формы нужно использовать 2 компонента: `CdekForm` и `CdekFormControl`.
Первый работает, как обертка. Второй предоставляет элемент формы. Связь между ними устанавливается
сама, вложенность не важна.

Для базовой формы, которая будет собирать имя и фамилию, минимально нужен такой код:

```js
<CdekForm @submit="submit">
  <CdekFormControl name="firstName" />
  <CdekFormControl name="surname" />

  <button>Продолжить<button>
</CdekForm>
```

Где `name` для `CdekFormControl` - это будущее название свойства в объекте, а `submit` на `CdekForm`
позволяет подписаться на получение всего объекта при отправке формы.

По дефолту `CdekFormControl` будет отображать `CdekInput`, позже добавится поддержка дополнительных
компонентов.

Когда произойдет событие `submit` в форме из примера, в callback прийдет такой объект:

```js
{
  firstName: "значение",
  surname: "значение"
}
```

Что позволит вам сразу отправить этот объект на бэк, в случае если передавать корректный `name`,
который будет соответствовать полю в запросе.

> Введите данные в оба поля и нажмите "Продолжить"

<Story id="form-cdekform--primary" />

---

### Начальные значения

Для передачи начального значения, нужно в `CdekFormControl` передать параметр `initialValue`.

```js
<CdekFormControl name="firstName" initialValue="Имя" />
```

> Нажмите "Продолжить"

<Story id="form-cdekform--with-initial-values" />
